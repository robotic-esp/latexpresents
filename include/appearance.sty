%%%%%%%%%%%% APPERANCE COMMANDS %%%%%%%%%%%%
%%% SLIDE TRANSITIONS %%%
% Require pdfpc > 4.4.0
\definecomplimentarykeys{espbeamer}{transition}{nodebug}{debug}%
\NewDocumentCommand{\espbeamer@transition@cmd}{O{}}
{%
    \ifespbeamer@debug%
        \presetkeys[espbeamer]{transition}{debug=true}{}%
    \else%
        \presetkeys[espbeamer]{transition}{debug=false}{}%
    \fi%
    \setkeys[espbeamer]{transition}{#1}%

    \ifx\espbeamer@transition@effect\empty%
        \transreplace%
        \ifespbeamer@transition@debug%
            \say{\\ `\detokenize{\\transreplace}\\}%
        \fi%
    \else%
        \ifx\espbeamer@transition@time\empty%
            \ifx\espbeamer@transition@angle\empty%
                \espbeamer@transition@effect%
                \ifespbeamer@transition@debug%
                    \say{\\ `\espbeamer@transition@effect`\\}%
                \fi%
            \else%
                \espbeamer@transition@effect[direction=\espbeamer@transition@angle]%
                \ifespbeamer@transition@debug%
                    \say{\\ `\espbeamer@transition@effect[direction=\espbeamer@transition@angle]`\\}%
                \fi%
            \fi%
        \else%
            \ifx\espbeamer@transition@angle\empty%
                \espbeamer@transition@effect[duration=\espbeamer@transition@time]%
                \ifespbeamer@transition@debug%
                    \say{\\ `\espbeamer@transition@effect[duration=\espbeamer@transition@time]`\\}%
                \fi%
            \else%
                \espbeamer@transition@effect[duration=\espbeamer@transition@time,direction=\espbeamer@transition@angle]%
                \ifespbeamer@transition@debug%
                    \say{\\ `\espbeamer@transition@effect[duration=\espbeamer@transition@time,direction=\espbeamer@transition@angle]`\\}%
                \fi%
            \fi%
        \fi%
    \fi%
}%
% effect
\newcommand*{\espbeamer@transition@effect}{}%
\newcommand*{\settransitioneffect}[1]{\renewcommand*{\espbeamer@transition@effect}{#1}}%
% duration
\newcommand*{\espbeamer@transition@time}{}%
\newcommand*{\settransitiontime}[1]{\renewcommand*{\espbeamer@transition@time}{#1}}%
% direction
\newcommand*{\espbeamer@transition@angle}{}%
\newcommand*{\settransitionangle}[1]{\renewcommand*{\espbeamer@transition@angle}{#1}}%
% automatic advancement (not really slide transition, despite what Beamer says)
\newcommand*{\autoadvance}[1]{%
    \transduration{#1}%
    \say{\\***AUTO (#1s)***\\}%
}%
%%% SLIDE TRANSITIONS %%%

%%% UNDERLINE %%%
%From: https://alexwlchan.net/2017/10/latex-underlines/
\renewcommand{\ULdepth}{1.45pt}
\contourlength{0.7pt}
\renewcommand{\emph}[1]%
{%
    \uline{\phantom{#1}}%
    \llap%
    {%
        \usebeamercolor{background canvas}
        \contour{background canvas.bg}{#1}%
    }%
}
\newcommand*{\copyrighttext}[1]{\usebeamerfont{copyright}\usebeamercolor*{copyright}\textcopyright{}#1 -- THIS DOESN'T WORK?}

%%% MATH-COMPATIBLE COLOURED ALERTS %%%
\newcommand*{\alertBlue}[1]{{\setBlueAlert{}\alert{#1}}}%
\newcommand*{\alertGreen}[1]{{\setGreenAlert{}\alert{#1}}}%
\newcommand*{\alertYellow}[1]{{\setYellowAlert{}\alert{#1}}}%
\newcommand*{\alertOrange}[1]{{\setOrangeAlert{}\alert{#1}}}%
\newcommand*{\alertRed}[1]{{\setRedAlert{}\alert{#1}}}%
\newcommand*{\alertGray}[1]{{\setGrayAlert{}\alert{#1}}}%

\newcommand*{\setBlueAlert}%
{%
    \setbeamercolor{alerted text}{fg=BLUE, bg=}%
}%
\newcommand*{\setGreenAlert}%
{%
    \setbeamercolor{alerted text}{fg=GREEN, bg=}%
}%
\newcommand*{\setYellowAlert}%
{%
    \setbeamercolor{alerted text}{fg=YELLOW, bg=}%
}%
\newcommand*{\setOrangeAlert}%
{%
    \setbeamercolor{alerted text}{fg=ORANGE, bg=}%
}%
\newcommand*{\setRedAlert}%
{%
    \setbeamercolor{alerted text}{fg=RED, bg=}%
}%
\newcommand*{\setGrayAlert}%
{%
    \setbeamercolor{alerted text}{fg=GRAY, bg=}%
}%
%%%%%%%%%%%% END APPERANCE COMMANDS %%%%%%%%%%%%
